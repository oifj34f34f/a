{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "Bug with extra space for some html elements",
  "home_page_url": "https://issuetracker.google.com/issues/119256504",
  "feed_url": "https://issuetracker.google.com/issues/119256504/feed.json",
  "description": "Google Issue Tracker Export: Issue 119256504",
  "language": "en-US",
  "items": [
    {
      "id": "119256504#comment1",
      "url": "https://issuetracker.google.com/issues/119256504#comment1",
      "title": "Initial Report",
      "content_text": "When I translate by Cloud API some phase with html\nGoogle break add extra space to some tags\n\nExample: <a>text</a><p>Hello <a>text</a></p><li>Hello</li><li>World</li>\nGet: <a>Text</a> <p> Hallo <a>Text</a> </p><li> Hallo </li><li> Welt </li>\n\nWhat you expected to happen:\nShould be translated: <a>Text</a><p>Hallo <a>text</a></p><li>Hallo</li><li>Welt</li>\nBut Google break word by added space between letters\n\nSteps to reproduce:\nhttps://developers.google.com/apis-explorer/#p/translate/v2/language.translations.list\nThe input text to translate -  <a>text</a><p>Hello <a>text</a></p><li>Hello</li><li>World</li>\nTarget: de or ru\nSource: en",
      "content_html": "When I translate by Cloud API some phase with html<br>Google break add extra space to some tags<br><br>Example: &lt;a&gt;text&lt;/a&gt;&lt;p&gt;Hello &lt;a&gt;text&lt;/a&gt;&lt;/p&gt;&lt;li&gt;Hello&lt;/li&gt;&lt;li&gt;World&lt;/li&gt;<br>Get: &lt;a&gt;Text&lt;/a&gt; &lt;p&gt; Hallo &lt;a&gt;Text&lt;/a&gt; &lt;/p&gt;&lt;li&gt; Hallo &lt;/li&gt;&lt;li&gt; Welt &lt;/li&gt;<br><br>What you expected to happen:<br>Should be translated: &lt;a&gt;Text&lt;/a&gt;&lt;p&gt;Hallo &lt;a&gt;text&lt;/a&gt;&lt;/p&gt;&lt;li&gt;Hallo&lt;/li&gt;&lt;li&gt;Welt&lt;/li&gt;<br>But Google break word by added space between letters<br><br>Steps to reproduce:<br><a href=\"https://developers.google.com/apis-explorer/#p/translate/v2/language.translations.list\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"https://developers.google.com/apis-explorer/#p/translate/v2/language.translations.list\" data-b-redirected-href=\"https://developers.google.com/apis-explorer/#p/translate/v2/language.translations.list\">https://developers.google.com/apis-explorer/#p/translate/v2/language.translations.list</a><br>The input text to translate - ¬†&lt;a&gt;text&lt;/a&gt;&lt;p&gt;Hello &lt;a&gt;text&lt;/a&gt;&lt;/p&gt;&lt;li&gt;Hello&lt;/li&gt;&lt;li&gt;World&lt;/li&gt;<br>Target: de or ru<br>Source: en",
      "date_published": "2018-11-09T06:51:56Z",
      "authors": [
        {
          "name": "jo...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment2",
      "url": "https://issuetracker.google.com/issues/119256504#comment2",
      "content_text": "Thank you for reporting this issue. The Translation API engineering team were notified that some unexpected spaces are added around HTML tags. Kindly note that there are no ETAs for this issue to be resolved. \n\nAll future updates related to this matter will be posted on this thread.",
      "content_html": "Thank you for reporting this issue. The Translation API engineering team were notified that some unexpected spaces are added around HTML tags. Kindly note that there are no ETAs for this issue to be resolved. <br><br>All future updates related to this matter will be posted on this thread.",
      "date_published": "2018-11-10T17:55:26Z",
      "authors": [
        {
          "name": "at...@google.com"
        }
      ]
    },
    {
      "id": "119256504#comment3",
      "url": "https://issuetracker.google.com/issues/119256504#comment3",
      "content_text": "Just to point out that due to no-translate tags also being ordinary HTML, this issue also affects them as reported in my issue that got marked as a duplicate of this one: https://issuetracker.google.com/issues/120953357",
      "content_html": "Just to point out that due to no-translate tags also being ordinary HTML, this issue also affects them as reported in my issue that got marked as a duplicate of this one: <a href=\"https://issuetracker.google.com/issues/120953357\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"https://issuetracker.google.com/issues/120953357\" data-b-redirected-href=\"https://issuetracker.google.com/issues/120953357\">https://issuetracker.google.com/issues/120953357</a>",
      "date_published": "2019-01-24T13:50:53Z",
      "authors": [
        {
          "name": "da...@gear4music.com"
        }
      ]
    },
    {
      "id": "119256504#comment4",
      "url": "https://issuetracker.google.com/issues/119256504#comment4",
      "content_text": "Is there any update on this issue? I am facing the same problem.",
      "content_html": "Is there any update on this issue? I am facing the same problem.",
      "date_published": "2019-05-17T06:19:10Z",
      "authors": [
        {
          "name": "al...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment5",
      "url": "https://issuetracker.google.com/issues/119256504#comment5",
      "content_text": "Same here, and not only on html tags. Same issue appeare if you use format = text. For example C# produce C # output. Best scenario witch describte this issue:\n(char/word)(special char)(char/word) in this case will be output (translation)(space)(special char)(space)(translation)",
      "content_html": "Same here, and not only on html tags. Same issue appeare if you use format = text. For example C# produce C # output. Best scenario witch describte this issue:<br>(char/word)(special char)(char/word) in this case will be output (translation)(space)(special char)(space)(translation)",
      "date_published": "2019-05-17T17:47:26Z",
      "authors": [
        {
          "name": "em...@tomas-novotny.eu"
        }
      ]
    },
    {
      "id": "119256504#comment6",
      "url": "https://issuetracker.google.com/issues/119256504#comment6",
      "content_text": "This is still a problem: \nSee:\n\nhttps://github.com/soimort/translate-shell/issues/175\nhttps://github.com/googleapis/google-cloud-dotnet/issues/3126\n\nThere some cases where command sequences just get eaten.\n\nThere needs to be a more reliable way to ignore certain text - ideally passing an array of start/end coordinates.",
      "content_html": "This is still a problem: <br>See:<br><br><a href=\"https://www.google.com/url?q=https://github.com/soimort/translate-shell/issues/175&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw07ItkCind3PBCsDF4CWMmM\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"https://github.com/soimort/translate-shell/issues/175\" data-b-redirected-href=\"https://www.google.com/url?q=https://github.com/soimort/translate-shell/issues/175&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw07ItkCind3PBCsDF4CWMmM\">https://github.com/soimort/translate-shell/issues/175</a><br><a href=\"https://www.google.com/url?q=https://github.com/googleapis/google-cloud-dotnet/issues/3126&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2EOG-UwL2hm__ji3NoG4YQ\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"https://github.com/googleapis/google-cloud-dotnet/issues/3126\" data-b-redirected-href=\"https://www.google.com/url?q=https://github.com/googleapis/google-cloud-dotnet/issues/3126&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2EOG-UwL2hm__ji3NoG4YQ\">https://github.com/googleapis/google-cloud-dotnet/issues/3126</a><br><br>There some cases where command sequences just get eaten.<br><br>There needs to be a more reliable way to ignore certain text - ideally passing an array of start/end coordinates.",
      "date_published": "2019-08-05T20:05:49Z",
      "authors": [
        {
          "name": "zo...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment7",
      "url": "https://issuetracker.google.com/issues/119256504#comment7",
      "content_text": "The same problem with formulas: https://webapps.stackexchange.com/questions/120850/google-translate-inserting-extra-spaces-in-original-formulas",
      "content_html": "The same problem with formulas: <a href=\"https://www.google.com/url?q=https://webapps.stackexchange.com/questions/120850/google-translate-inserting-extra-spaces-in-original-formulas&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw1wd7nkwyCJk7hZqoluAwax\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"https://webapps.stackexchange.com/questions/120850/google-translate-inserting-extra-spaces-in-original-formulas\" data-b-redirected-href=\"https://www.google.com/url?q=https://webapps.stackexchange.com/questions/120850/google-translate-inserting-extra-spaces-in-original-formulas&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw1wd7nkwyCJk7hZqoluAwax\">https://webapps.stackexchange.com/questions/120850/google-translate-inserting-extra-spaces-in-original-formulas</a>",
      "date_published": "2019-08-07T10:15:45Z",
      "authors": [
        {
          "name": "ro...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment8",
      "url": "https://issuetracker.google.com/issues/119256504#comment8",
      "content_text": "The same problem, not only occur on html, I aslo found it at some special characters.\nBelow is an example which can reproduce this problem:\n\ntranslate [en] into [zh],\n(1)\nsource: The sharing code is: %1$s,%2$s\ntarget: ÂÖ±‰∫´‰ª£Á†Å‰∏∫ÔºöÔºÖ1 $ sÔºåÔºÖ2 $ s\n\n(2)\nsource: The device is connecting to the network\\n\ntarget: ËÆæÂ§áÊ≠£Âú®ËøûÊé•Âà∞ÁΩëÁªú\\ n\n\nAs you see, the target have some extra space.",
      "content_html": "The same problem, not only occur on html, I aslo found it at some special characters.<br>Below is an example which can reproduce this problem:<br><br>translate [en] into [zh],<br>(1)<br>source: The sharing code is: %1$s,%2$s<br>target: ÂÖ±‰∫´‰ª£Á†Å‰∏∫ÔºöÔºÖ1 $ sÔºåÔºÖ2 $ s<br><br>(2)<br>source: The device is connecting to the network\\n<br>target: ËÆæÂ§áÊ≠£Âú®ËøûÊé•Âà∞ÁΩëÁªú\\ n<br><br>As you see, the target have some extra space.<br>",
      "date_published": "2019-08-10T06:59:49Z",
      "authors": [
        {
          "name": "mo...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment9",
      "url": "https://issuetracker.google.com/issues/119256504#comment9",
      "content_text": "Have the same issue here:\n\nTranslate [en] into [zh]:\nSource: Subtraction of two values. <strong>a</strong> and <strong>b</strong> can be numbers, curves or arrays.\nTarget: ÂáèÂéª‰∏§‰∏™ÂÄº„ÄÇ <strong> a </ strong>Âíå<strong> b </ strong>ÂèØ‰ª•ÊòØÊï∞Â≠óÔºåÊõ≤Á∫øÊàñÊï∞ÁªÑ„ÄÇ\n\nSpaces are generated in the end-tags and between a start-tag and end-tag.",
      "content_html": "Have the same issue here:<br><br>Translate [en] into [zh]:<br>Source: Subtraction of two values. &lt;strong&gt;a&lt;/strong&gt; and &lt;strong&gt;b&lt;/strong&gt; can be numbers, curves or arrays.<br>Target: ÂáèÂéª‰∏§‰∏™ÂÄº„ÄÇ &lt;strong&gt; a &lt;/ strong&gt;Âíå&lt;strong&gt; b &lt;/ strong&gt;ÂèØ‰ª•ÊòØÊï∞Â≠óÔºåÊõ≤Á∫øÊàñÊï∞ÁªÑ„ÄÇ<br><br>Spaces are generated in the end-tags and between a start-tag and end-tag.",
      "date_published": "2019-08-22T00:19:10Z",
      "authors": [
        {
          "name": "ma...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment10",
      "url": "https://issuetracker.google.com/issues/119256504#comment10",
      "content_text": "Hi,\nIs there any way of removing spaces around special characters after translation",
      "content_html": "Hi,<br>Is there any way of removing spaces around special characters after translation ¬†<br>",
      "date_published": "2019-08-23T10:58:09Z",
      "authors": [
        {
          "name": "sa...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment11",
      "url": "https://issuetracker.google.com/issues/119256504#comment11",
      "content_text": "\"Is there any way of removing spaces around special characters after translation\"\nDepending on your use case, the notranslate wrappers/attributes may help.\nOtherwise, you can try a command sequence with numbers, but it's not 100% reliable and in some cases get \"eaten\".\n\nUntil they add reserved words, or indexes as a pass-in - I'm not sure there is going to be a perfect solution here for all use cases.",
      "content_html": "&quot;Is there any way of removing spaces around special characters after translation&quot;<br>Depending on your use case, the notranslate wrappers/attributes may help.<br>Otherwise, you can try a command sequence with numbers, but it&#39;s not 100% reliable and in some cases get &quot;eaten&quot;.<br><br>Until they add reserved words, or indexes as a pass-in - I&#39;m not sure there is going to be a perfect solution here for all use cases.",
      "date_published": "2019-08-26T12:24:28Z",
      "authors": [
        {
          "name": "zo...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment12",
      "url": "https://issuetracker.google.com/issues/119256504#comment12",
      "content_text": "Same problem, both with v2 and v3beta1, using python libs.\nORG: <h1>Text</h1> you <i>wish</i> to <b><span class=\"notranslate\">translate</span></b>.\nV2:  <h1> Text </h1> du <i>vill</i> <b><span class=\"notranslate\">translate</span></b> .\nV3:  <h1> Text </h1> du <i>vill</i> <b><span class=\"notranslate\">translate</span></b> .\n\nWorth noting is that for some reason the word \"vill\" does not get the additional spaces...",
      "content_html": "Same problem, both with v2 and v3beta1, using python libs.<br>ORG: &lt;h1&gt;Text&lt;/h1&gt; you &lt;i&gt;wish&lt;/i&gt; to &lt;b&gt;&lt;span class=&quot;notranslate&quot;&gt;translate&lt;/span&gt;&lt;/b&gt;.<br>V2: ¬†&lt;h1&gt; Text &lt;/h1&gt; du &lt;i&gt;vill&lt;/i&gt; &lt;b&gt;&lt;span class=&quot;notranslate&quot;&gt;translate&lt;/span&gt;&lt;/b&gt; .<br>V3: ¬†&lt;h1&gt; Text &lt;/h1&gt; du &lt;i&gt;vill&lt;/i&gt; &lt;b&gt;&lt;span class=&quot;notranslate&quot;&gt;translate&lt;/span&gt;&lt;/b&gt; .<br><br>Worth noting is that for some reason the word &quot;vill&quot; does not get the additional spaces...",
      "date_published": "2019-08-28T09:29:25Z",
      "authors": [
        {
          "name": "to...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment13",
      "url": "https://issuetracker.google.com/issues/119256504#comment13",
      "content_text": "Any update on this issue? Facing the same issue here:\nText: \\((a+b)^n\\)\nExpected result: \\((a+b)^n\\)\nResult: \\ ((a + b) ^ n \\)",
      "content_html": "Any update on this issue? Facing the same issue here:<br>Text: \\((a+b)^n\\)<br>Expected result: \\((a+b)^n\\)<br>Result: \\ ((a + b) ^ n \\)",
      "date_published": "2019-09-05T10:37:45Z",
      "authors": [
        {
          "name": "jo...@kognity.com"
        }
      ]
    },
    {
      "id": "119256504#comment14",
      "url": "https://issuetracker.google.com/issues/119256504#comment14",
      "content_text": "Same issue translating the following:\nOriginal: ## **COSE **\\\\-** COSI**‚Üµ\nTranslated: ## ** COSE ** \\\\ - ** COSI ** ‚Üµ\n\n## **COSE **\\\\-** COSI**‚Üµ\n{\n  \"q\": [\"## **COSE **\\\\-** COSI**‚Üµ\"],\n  \"target\": \"en\",\n  \"model\": \"nmt\"\n}\n\nreturns this:\n{\n  \"data\": {\n    \"translations\": [\n      {\n        \"translatedText\": \"## ** COSE ** \\\\ - ** COSI ** ‚Üµ\",\n        \"detectedSourceLanguage\": \"it\",\n        \"model\": \"nmt\"\n      }\n    ]\n  }\n}",
      "content_html": "Same issue translating the following:<br>Original: ## **COSE **\\\\-** COSI**‚Üµ<br>Translated: ## ** COSE ** \\\\ - ** COSI ** ‚Üµ<br><br>## **COSE **\\\\-** COSI**‚Üµ<br>{<br>¬† &quot;q&quot;: [&quot;## **COSE **\\\\-** COSI**‚Üµ&quot;],<br>¬† &quot;target&quot;: &quot;en&quot;,<br>¬† &quot;model&quot;: &quot;nmt&quot;<br>}<br><br>returns this:<br>{<br>¬† &quot;data&quot;: {<br>¬† ¬† &quot;translations&quot;: [<br>¬† ¬† ¬† {<br>¬† ¬† ¬† ¬† &quot;translatedText&quot;: &quot;## ** COSE ** \\\\ - ** COSI ** ‚Üµ&quot;,<br>¬† ¬† ¬† ¬† &quot;detectedSourceLanguage&quot;: &quot;it&quot;,<br>¬† ¬† ¬† ¬† &quot;model&quot;: &quot;nmt&quot;<br>¬† ¬† ¬† }<br>¬† ¬† ]<br>¬† }<br>}",
      "date_published": "2019-12-25T07:32:23Z",
      "authors": [
        {
          "name": "sh...@duve.com"
        }
      ]
    },
    {
      "id": "119256504#comment15",
      "url": "https://issuetracker.google.com/issues/119256504#comment15",
      "content_text": "Translating markdown text just brake the markdown rules...",
      "content_html": "Translating markdown text just brake the markdown rules...",
      "date_published": "2019-12-25T07:33:02Z",
      "authors": [
        {
          "name": "sh...@duve.com"
        }
      ]
    },
    {
      "id": "119256504#comment16",
      "url": "https://issuetracker.google.com/issues/119256504#comment16",
      "content_text": "This is also an issue with country flag emoji's which always consist of 2 unicode characters that need to stay together: \n\nsource = \"üáßüá™ Flag: Belgium\"\n\n... translating this with google api gives back : \n¬†üáß üá™ Vlag: Belgi√´\n\nHave to manually remove the space with a regex now in order to render a correct flag.. : \npreg_replace('/(\\p{Z}?[\\x{1F1E6}-\\x{1F1FF}]) (\\p{Z}?[\\x{1F1E6}-\\x{1F1FF}])/u', '$1$2', $str);\n=> ¬†üáßüá™ Vlag: Belgi√´\n\nWould be good if this issue get's fixed in the api. ",
      "content_html": "This is also an issue with country flag emoji&#39;s which always consist of 2 unicode characters that need to stay together: <br><br>source = &quot;üáßüá™ Flag: Belgium&quot;<br><br>... translating this with google api gives back : <br>¬†üáß üá™ Vlag: Belgi√´<br><br>Have to manually remove the space with a regex now in order to render a correct flag.. : <br>preg_replace(&#39;/(\\p{Z}?[\\x{1F1E6}-\\x{1F1FF}]) (\\p{Z}?[\\x{1F1E6}-\\x{1F1FF}])/u&#39;, &#39;$1$2&#39;, $str);<br>=&gt; ¬†üáßüá™ Vlag: Belgi√´<br><br>Would be good if this issue get&#39;s fixed in the api. ",
      "date_published": "2020-01-30T13:30:42Z",
      "authors": [
        {
          "name": "ja...@massivemedia.eu"
        }
      ]
    },
    {
      "id": "119256504#comment17",
      "url": "https://issuetracker.google.com/issues/119256504#comment17",
      "content_text": "I am getting the same issue when I use Google Translate website. For example:\n\n20¬∞C will become 20 ¬∞ C\n3 m/s will become 3 m / s\n\nThis is so annoying. Please fix.\n",
      "content_html": "I am getting the same issue when I use Google Translate website. For example:<br><br>20¬∞C will become 20 ¬∞ C<br>3 m/s will become 3 m / s<br><br>This is so annoying. Please fix.<br>",
      "date_published": "2020-02-17T10:40:05Z",
      "authors": [
        {
          "name": "nw...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment18",
      "url": "https://issuetracker.google.com/issues/119256504#comment18",
      "content_text": "Hello,\n\nThe Cloud Translation team is actively working on product enhancements and will investigate this issue amongst other HTML quality improvements during our next semester planning. Stay tuned!\n\nEmmanuell",
      "content_html": "<p>Hello,</p>\n<p>The Cloud Translation team is actively working on product enhancements and will investigate this issue amongst other HTML quality improvements during our next semester planning. Stay tuned!</p>\n<p>Emmanuell</p>\n",
      "date_published": "2020-03-18T17:58:47Z",
      "authors": [
        {
          "name": "se...@google.com"
        }
      ]
    },
    {
      "id": "119256504#comment19",
      "url": "https://issuetracker.google.com/issues/119256504#comment19",
      "content_text": "It's very annoying, we can't use translations produced by Cloud API without extra processing (that might be very expensive) because it breaks html markup (by adding extra spaces, changing letter case) randomly. Nothing was done to fix it for last two years. Shame on you.",
      "content_html": "It&#39;s very annoying, we can&#39;t use translations produced by Cloud API without extra processing (that might be very expensive) because it breaks html markup (by adding extra spaces, changing letter case) randomly. Nothing was done to fix it for last two years. Shame on you.",
      "date_published": "2020-05-18T12:15:50Z",
      "authors": [
        {
          "name": "th...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment20",
      "url": "https://issuetracker.google.com/issues/119256504#comment20",
      "content_text": "My theory from day one: the added spaces are markers, so Google's crawlbot can identify auto translated content on the web more easily. In other words: a way to weed out most auto-translated pages. Not sure if it is an effective strategy given there are other great translator APIs or weird work-arounds to remove the spaces.",
      "content_html": "My theory from day one: the added spaces are markers, so Google&#39;s crawlbot can identify auto translated content on the web more easily. In other words: a way to weed out most auto-translated pages. Not sure if it is an effective strategy given there are other great translator APIs or weird work-arounds to remove the spaces.",
      "date_published": "2020-05-18T12:49:34Z",
      "authors": [
        {
          "name": "ym...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment21",
      "url": "https://issuetracker.google.com/issues/119256504#comment21",
      "content_text": "same with me why is this problem not solved after more then two years?\nIt appears that if the verb includes the % it will be broken into \"% 1 $ s\"\nHow can I prevent this from happening ?\n",
      "content_html": "same with me why is this problem not solved after more then two years?<br>It appears that if the verb includes the % it will be broken into &quot;% 1 $ s&quot;<br>How can I prevent this from happening ?<br>",
      "date_published": "2020-06-27T08:12:56Z",
      "authors": [
        {
          "name": "pe...@psmits.com"
        }
      ]
    },
    {
      "id": "119256504#comment22",
      "url": "https://issuetracker.google.com/issues/119256504#comment22",
      "content_text": "Hi all,\n\nFrom the thread, there are two types of space issue, one is introduced between html tags, another is between some special characters. I made some improvements on the html one, the special characters one will be in prod later.\n\nNow the html space will not have more than one space between two plain words, \nBefore: <a>Text</a> <p> Hallo <a>Text</a> </p>\nNow: <a>Text</a> <p>Hallo <a>Text</a></p>\nIt may not respect to the source sentence, but it can guarantee the browser can show correct sentences.",
      "content_html": "Hi all,<br><br>From the thread, there are two types of space issue, one is introduced between html tags, another is between some special characters. I made some improvements on the html one, the special characters one will be in prod later.<br><br>Now the html space will not have more than one space between two plain words, <br>Before: &lt;a&gt;Text&lt;/a&gt; &lt;p&gt; Hallo &lt;a&gt;Text&lt;/a&gt; &lt;/p&gt;<br>Now: &lt;a&gt;Text&lt;/a&gt; &lt;p&gt;Hallo &lt;a&gt;Text&lt;/a&gt;&lt;/p&gt;<br>It may not respect to the source sentence, but it can guarantee the browser can show correct sentences.",
      "date_published": "2020-10-06T04:36:16Z",
      "authors": [
        {
          "name": "yi...@google.com"
        }
      ]
    },
    {
      "id": "119256504#comment23",
      "url": "https://issuetracker.google.com/issues/119256504#comment23",
      "content_text": "The same issue appears here with extra spaces randomly added to html tags.\n\nAPI version: \n\"google/apiclient\": \"^2.0\",\n\"google/cloud-automl\": \"^0.10.0\",\n\"google/cloud-translate\": \"^1.7\"\n\nExample:\nSource language: \n<li>If you must access file services over the Internet, it is strongly recommended that you use a VPN  to connect to your device (see <a href=\"website.com\">Tutorial</a>).</li>\ntarget language: \n<li>Si vous devez acc√©der aux services de fichiers sur Internet, il est fortement recommand√© d&#39;utiliser un VPN pour vous connecter √† votre p√©riph√©rique (voir <a href=\"website.com\">Didacticiel</a> ).</li>\n\nWhat we expected to happen:\n<li>Si vous devez acc√©der aux services de fichiers sur Internet, il est fortement recommand√© d&#39;utiliser un VPN pour vous connecter √† votre p√©riph√©rique (voir <a href=\"website.com\">Didacticiel</a>).</li>\n",
      "content_html": "The same issue appears here with extra spaces randomly added to html tags.<br><br>API version: <br>&quot;google/apiclient&quot;: &quot;^2.0&quot;,<br>&quot;google/cloud-automl&quot;: &quot;^0.10.0&quot;,<br>&quot;google/cloud-translate&quot;: &quot;^1.7&quot;<br><br>Example:<br>Source language: <br>&lt;li&gt;If you must access file services over the Internet, it is strongly recommended that you use a VPN ¬†to connect to your device (see &lt;a href=&quot;<a href=\"https://www.google.com/url?q=http://website.com&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2nWSf-p51CEw3dJ3mRvK8n\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"http://website.com\" data-b-redirected-href=\"https://www.google.com/url?q=http://website.com&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2nWSf-p51CEw3dJ3mRvK8n\">website.com</a>&quot;&gt;Tutorial&lt;/a&gt;).&lt;/li&gt;<br>target language: <br>&lt;li&gt;Si vous devez acc√©der aux services de fichiers sur Internet, il est fortement recommand√© d&amp;#39;utiliser un VPN pour vous connecter √† votre p√©riph√©rique (voir &lt;a href=&quot;<a href=\"https://www.google.com/url?q=http://website.com&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2nWSf-p51CEw3dJ3mRvK8n\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"http://website.com\" data-b-redirected-href=\"https://www.google.com/url?q=http://website.com&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2nWSf-p51CEw3dJ3mRvK8n\">website.com</a>&quot;&gt;Didacticiel&lt;/a&gt; ).&lt;/li&gt;<br><br>What we expected to happen:<br>&lt;li&gt;Si vous devez acc√©der aux services de fichiers sur Internet, il est fortement recommand√© d&amp;#39;utiliser un VPN pour vous connecter √† votre p√©riph√©rique (voir &lt;a href=&quot;<a href=\"https://www.google.com/url?q=http://website.com&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2nWSf-p51CEw3dJ3mRvK8n\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"http://website.com\" data-b-redirected-href=\"https://www.google.com/url?q=http://website.com&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2nWSf-p51CEw3dJ3mRvK8n\">website.com</a>&quot;&gt;Didacticiel&lt;/a&gt;).&lt;/li&gt;<br>",
      "date_published": "2020-12-15T05:13:49Z",
      "authors": [
        {
          "name": "te...@synology.com"
        }
      ]
    },
    {
      "id": "119256504#comment24",
      "url": "https://issuetracker.google.com/issues/119256504#comment24",
      "content_text": "please fix this",
      "content_html": "please fix this",
      "date_published": "2021-02-28T14:26:36Z",
      "authors": [
        {
          "name": "ap...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment25",
      "url": "https://issuetracker.google.com/issues/119256504#comment25",
      "content_text": "Workaround I came up with\nThis is for text translation. I don't know how google behaves for html input. Could be similar... \n\nBefore passing the string to translator, run through this regex /(?=[^a-zA-Z _,.])/gm which matches all special characters and replace the matches with a special character that's not present in the string. For me, I used * character.\nThen pass it on to the translator and run the translated string through another simple regex /( \\* )|( \\*)|(\\* )/gm and replace the matches with empty string. Then you get the desired output.\nOther languages where input string contain non alphabet chars can filter out those chars too in the first regex if needed but it's not necessary. The first regex can further be modified(if speed is a concern) to match only those special characters which doesn't have a preceeding space character. Google won't add space to any special character which already has a preceeding space..",
      "content_html": "<p>Workaround I came up with\nThis is for text translation. I don&#39;t know how google behaves for html input. Could be similar...</p>\n<p>Before passing the string to translator, run through this regex /(?=[^a-zA-Z _,.])/gm which matches all special characters and replace the matches with a special character that&#39;s not present in the string. For me, I used * character.\nThen pass it on to the translator and run the translated string through another simple regex /( * )|( *)|(* )/gm and replace the matches with empty string. Then you get the desired output.\nOther languages where input string contain non alphabet chars can filter out those chars too in the first regex if needed but it&#39;s not necessary. The first regex can further be modified(if speed is a concern) to match only those special characters which doesn&#39;t have a preceeding space character. Google won&#39;t add space to any special character which already has a preceeding space..</p>\n",
      "date_published": "2021-07-21T22:59:34Z",
      "authors": [
        {
          "name": "br...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment26",
      "url": "https://issuetracker.google.com/issues/119256504#comment26",
      "content_text": "Any news about it? The whole Wikipedia Translation service is suffering.",
      "content_html": "Any news about it? The whole Wikipedia Translation service is suffering.",
      "date_published": "2021-09-21T16:48:25Z",
      "authors": [
        {
          "name": "g3...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment27",
      "url": "https://issuetracker.google.com/issues/119256504#comment27",
      "content_text": "You can see the problem here: https://www.mediawiki.org/w/index.php?title=Topic:Wgxjepqmyhrhhjd3&topic_showPostId=wgzesuys70hbd75g&fromnotif=1#flow-post-wgzesuys70hbd75g",
      "content_html": "You can see the problem here: <a href=\"https://www.google.com/url?q=https://www.mediawiki.org/w/index.php?title%3DTopic:Wgxjepqmyhrhhjd3%26topic_showPostId%3Dwgzesuys70hbd75g%26fromnotif%3D1%23flow-post-wgzesuys70hbd75g&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2aDuUpUOKxopXDOjmu05Pr\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"https://www.mediawiki.org/w/index.php?title=Topic:Wgxjepqmyhrhhjd3&amp;topic_showPostId=wgzesuys70hbd75g&amp;fromnotif=1#flow-post-wgzesuys70hbd75g\" data-b-redirected-href=\"https://www.google.com/url?q=https://www.mediawiki.org/w/index.php?title%3DTopic:Wgxjepqmyhrhhjd3%26topic_showPostId%3Dwgzesuys70hbd75g%26fromnotif%3D1%23flow-post-wgzesuys70hbd75g&amp;sa=D&amp;source=buganizer&amp;usg=AOvVaw2aDuUpUOKxopXDOjmu05Pr\">https://www.mediawiki.org/w/index.php?title=Topic:Wgxjepqmyhrhhjd3&amp;topic_showPostId=wgzesuys70hbd75g&amp;fromnotif=1#flow-post-wgzesuys70hbd75g</a>",
      "date_published": "2021-09-21T16:49:36Z",
      "authors": [
        {
          "name": "g3...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment28",
      "url": "https://issuetracker.google.com/issues/119256504#comment28",
      "content_text": "Hello,\n\nThank you for your patience.\n\nI have forwarded your concerns to the product and they are working on it. Once I have an update it will be shared in this thread.\n\nKind Regards",
      "content_html": "<p>Hello,</p>\n<p>Thank you for your patience.</p>\n<p>I have forwarded your concerns to the product and they are working on it. Once I have an update it will be shared in this thread.</p>\n<p>Kind Regards</p>\n",
      "date_published": "2021-09-22T06:35:50Z",
      "authors": [
        {
          "name": "se...@google.com"
        }
      ]
    },
    {
      "id": "119256504#comment29",
      "url": "https://issuetracker.google.com/issues/119256504#comment29",
      "content_text": "deleted",
      "content_html": "<div style=\"white-space:pre-wrap;\">deleted</div>",
      "date_published": "2021-10-22T14:00:35Z",
      "authors": [
        {
          "name": "al...@gmail.com"
        }
      ],
      "attachments": [
        {
          "url": "https://issuetracker.google.com/issues/119256504/attachments/35260809",
          "mime_type": "application/octet-stream",
          "title": "deleted",
          "size_in_bytes": null
        }
      ]
    },
    {
      "id": "119256504#comment30",
      "url": "https://issuetracker.google.com/issues/119256504#comment30",
      "content_text": "Any update on this? Content Translation on Wikipedia is still showing this bug.",
      "content_html": "Any update on this? Content Translation on Wikipedia is still showing this bug.",
      "date_published": "2022-04-11T18:05:03Z",
      "authors": [
        {
          "name": "ar...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment31",
      "url": "https://issuetracker.google.com/issues/119256504#comment31",
      "content_text": "deleted",
      "content_html": "<div style=\"white-space:pre-wrap;\">deleted</div>",
      "date_published": "2022-09-22T20:15:08Z",
      "authors": [
        {
          "name": "ty...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment32",
      "url": "https://issuetracker.google.com/issues/119256504#comment32",
      "content_text": "Hey There,\n\nCan we get an update on this issue since it has been a year since the last communication on this ticket or get its priority upped to a P1 since this issue has been around for four years and is the second most user-impacted cloud translation bug?\n\nThanks and best regards!",
      "content_html": "Hey There,<br><br>Can we get an update on this issue since it has been a year since the last communication on this ticket or get its priority upped to a P1 since this issue has been around for four years and is the second most user-impacted cloud translation bug?<br><br>Thanks and best regards!",
      "date_published": "2022-09-22T20:17:51Z",
      "authors": [
        {
          "name": "ty...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment33",
      "url": "https://issuetracker.google.com/issues/119256504#comment33",
      "content_text": "Hi Google\n\nThis is annoying (also because the API is a paid service). Any update would be appreciated. Problem also happens with special HTML characters such as &amp; for '&' and it seems to be depending on the fact if the words around the characters are in upper or lower case. Examples (translating from EN to FR):\n\nThe word \"Crypto\" is in uppercase: Extra space added in the middle of the &amp; char:\n      The Crypto Fear &amp; Greed index --> La crypto peur & amp; Indice de cupidit√©\n\nThe word \"crypto\" is in lowercase: No extra space added in the middle:\n      The crypto Fear &amp; Greed index -> La crypto Peur &amp; Indice de cupidit√©\n\nThe location of the space is inconsistent. Sometimes &amp; will translate to & amp; and other times to &amp ;\n",
      "content_html": "Hi Google<br><br>This is annoying (also because the API is a paid service). Any update would be appreciated. Problem also happens with special HTML characters such as &amp;amp; for &#39;&amp;&#39; and it seems to be depending on the fact if the words around the characters are in upper or lower case. Examples (translating from EN to FR):<br><br>The word &quot;Crypto&quot; is in uppercase: Extra space added in the middle of the &amp;amp; char:<br>¬† ¬† ¬† The Crypto Fear &amp;amp; Greed index --&gt; La crypto peur &amp; amp; Indice de cupidit√©<br><br>The word &quot;crypto&quot; is in lowercase: No extra space added in the middle:<br>¬† ¬† ¬† The crypto Fear &amp;amp; Greed index -&gt; La crypto Peur &amp;amp; Indice de cupidit√©<br><br>The location of the space is inconsistent. Sometimes &amp;amp; will translate to &amp; amp; and other times to &amp;amp ;<br>",
      "date_published": "2022-10-01T09:41:42Z",
      "authors": [
        {
          "name": "ba...@mellink.net"
        }
      ]
    },
    {
      "id": "119256504#comment34",
      "url": "https://issuetracker.google.com/issues/119256504#comment34",
      "content_text": "Hello, any update on this issue? still seeing it in 2023",
      "content_html": "Hello, any update on this issue? still seeing it in 2023",
      "date_published": "2023-07-06T15:09:13Z",
      "authors": [
        {
          "name": "da...@ex-situ.com"
        }
      ]
    },
    {
      "id": "119256504#comment35",
      "url": "https://issuetracker.google.com/issues/119256504#comment35",
      "content_text": "Hey There,\n\nI am wondering if there is any update on this, I'm still getting this issue when using the google.cloud.translate_v2 API?\n\nCheers",
      "content_html": "Hey There,<br><br>I am wondering if there is any update on this, I&#39;m still getting this issue when using the google.cloud.translate_v2 API?<br><br>Cheers",
      "date_published": "2023-07-20T14:14:20Z",
      "authors": [
        {
          "name": "pe...@foundry.com"
        }
      ]
    },
    {
      "id": "119256504#comment36",
      "url": "https://issuetracker.google.com/issues/119256504#comment36",
      "content_text": "issue is still present and silly after processing is still needed.",
      "content_html": "issue is still present and silly after processing is still needed.",
      "date_published": "2024-02-22T08:18:13Z",
      "authors": [
        {
          "name": "27...@student.pwr.edu.pl"
        }
      ]
    },
    {
      "id": "119256504#comment37",
      "url": "https://issuetracker.google.com/issues/119256504#comment37",
      "content_text": "How can this still be present? no activity to solve this bug?",
      "content_html": "How can this still be present? no activity to solve this bug?",
      "date_published": "2024-04-03T21:57:09Z",
      "authors": [
        {
          "name": "ri...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment38",
      "url": "https://issuetracker.google.com/issues/119256504#comment38",
      "content_text": "Encountering this same issue when wrapping text with a <Span translate=\"no\"> tag that is followed by punctuation.",
      "content_html": "Encountering this same issue when wrapping text with a &lt;Span translate=&quot;no&quot;&gt; tag that is followed by punctuation.",
      "date_published": "2024-11-13T22:02:15Z",
      "authors": [
        {
          "name": "va...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment39",
      "url": "https://issuetracker.google.com/issues/119256504#comment39",
      "content_text": "Encountering this issue too, it seems it's been 3 years since someone with a google.com email said in this thread that the team is working on it and any progress would be shared here. \nAny progress in the last 3 years?",
      "content_html": "Encountering this issue too, it seems it&#39;s been 3 years since someone with a <a href=\"http://google.com\" target=\"_blank\" rel=\"noopener noreferrer nofollow ugc\" data-b-widget=\"url\" data-b-original-href=\"http://google.com\" data-b-redirected-href=\"http://google.com\">google.com</a>¬†email said in this thread that the team is working on it and any progress would be shared here. <br>Any progress in the last 3 years?",
      "date_published": "2024-12-12T11:25:18Z",
      "authors": [
        {
          "name": "ni...@babbels.nl"
        }
      ]
    },
    {
      "id": "119256504#comment40",
      "url": "https://issuetracker.google.com/issues/119256504#comment40",
      "content_text": "Any update on this? this is bad.. Content moderation is difficult .. code snippets are having additional spaces :(",
      "content_html": "Any update on this? this is bad.. Content moderation is difficult .. code snippets are having additional spaces :(",
      "date_published": "2024-12-23T09:30:20Z",
      "authors": [
        {
          "name": "me...@gmail.com"
        }
      ]
    },
    {
      "id": "119256504#comment41",
      "url": "https://issuetracker.google.com/issues/119256504#comment41",
      "content_text": "2025 and still not fixed. Translate v3 is adding random spaces as first character inside tags.\n\nFor example:\n<li>Tekst</li>\n\nIs tranlated to:\n<li> Text</li>",
      "content_html": "2025 and still not fixed. Translate v3 is adding random spaces as first character inside tags.<br><br>For example:<br>&lt;li&gt;Tekst&lt;/li&gt;<br><br>Is tranlated to:<br>&lt;li&gt; Text&lt;/li&gt;",
      "date_published": "2025-04-07T21:25:53Z",
      "authors": [
        {
          "name": "ma...@gmail.com"
        }
      ]
    }
  ]
}
